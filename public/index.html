<!DOCTYPE html>
<html>
   <head>
      <meta charset="UTF-8">
      <title>Web Serial API</title>
      <link rel="stylesheet" href="./dist/style.css">
      <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />

      
   </head>
   <body class="flex p-4 h-screen">
      <div class=" flex flex-col border w-80">
         <div class="tab flex justify-between border rounded-md">
            <button class="tablinks flex w-full border hover:border-gray-500 justify-center" id="defaultOpen" onclick="openCity(event, 'CV')">CV</button>
            <button class="tablinks flex w-full border hover:border-gray-500 justify-center" onclick="openCity(event, 'DPV')">DPV</button>
            <button class="tablinks flex w-full border hover:border-gray-500 justify-center" onclick="openCity(event, 'SWV')">SWV</button>
         </div>
         <div class="flex p-4 border">
            <label for="title" class="w-56">Title Graphic</label>
            <input step="1" id="title" type="text" class="border w-40 text-center" value="Your Title Here">
         </div>
         <div id="CV" class="tabcontent border-2 space-y-3 p-4">
            <form id="cvForm">
               <div class="flex">
                  <label for="setTime" class="w-56">SetTime</label>
                  <input value="1000" step="1" id="setTime" type="number" class="border w-40 text-center">
               </div>
               <div class="flex">
                  <label for="startP" class="w-56">StartP(mv)</label>
                  <input value="-800" step="1" id="startP" type="number" class="border w-40 text-center">
               </div>
               <div class="flex">
                  <label for="endP" class="w-56">EndP(mv)</label>
                  <input value="0" step="1" id="endP" type="number" class="border w-40 text-center">
               </div>
               <div class="flex">
                  <label for="step" class="w-56">Step(mv)</label>
                  <input value="1" step="1" id="step" type="number" class="border w-40 text-center">
               </div>
               <div class="flex">
                  <label for="scanRate" class="w-56">ScanRate(mv)</label>
                  <input value="100" step="1" id="scanRate" type="number" class="border w-40 text-center">
               </div>
               <div class="flex">
                  <label for="cycle" class="w-56">Cycles</label>
                  <input value="1" step="1" id="cycle" type="number" class="border w-40 text-center">
               </div>
            </form>
            <div class="flex gap-2 justify-between mt-3">
               <button id="submitFormCV" type="submit" form="cvForm" class="flex-1 bg-green-800 text-white h-7 rounded-md">Read Data</button>
               <button id="closePortCV"  class="flex-1 bg-red-600 text-white  rounded-md">Stop Read</button>
            </div>
         </div>
         <div id="DPV" class="tabcontent  border-2 space-y-3 p-4">
            <form id="dpvForm">
               <div class="flex">
                  <label for="setTime" class="w-56">SetTime</label>
                  <input value="0" step="1" id="setTime" type="number" class="border w-40 text-center">
               </div>
               <div class="flex">
                  <label for="startP" class="w-56">StartP(mv)</label>
                  <input value="0" step="1" id="startP" type="number" class="border w-40 text-center">
               </div>
               <div class="flex">
                  <label for="endP" class="w-56">EndP(mv)</label>
                  <input value="0" step="1" id="endP" type="number" class="border w-40 text-center">
               </div>
               <div class="flex">
                  <label for="pulseP" class="w-56">PulseP(mv)</label>
                  <input value="0" step="1" id="pulseP" type="number" class="border w-40 text-center">
               </div>
               <div class="flex">
                  <label for="step" class="w-56">Step(mv)</label>
                  <input value="0" step="1" id="step" type="number" class="border w-40 text-center">
               </div>
               <div class="flex">
                  <label for="pulseW" class="w-56">PulseW</label>
                  <input value="0" step="1" id="pulseW" type="number" class="border w-40 text-center">
               </div>
               <div class="flex">
                  <label for="baseW" class="w-56">BaseW</label>
                  <input value="0" step="1" id="baseW" type="number" class="border w-40 text-center">
               </div>
               <div class="flex">
                  <label for="periodP" class="w-56">PeriodP</label>
                  <input value="0" step="1" id="periodP" type="number" class="border w-40 text-center">
               </div>
               <div class="flex">
                  <label for="periodB" class="w-56">PeriodB</label>
                  <input value="0" step="1" id="periodB" type="number" class="border w-40 text-center">
               </div>
            </form>
            <div class="flex gap-2 justify-between mt-3">
               <button id="submitFormDPV" type="submit" form="dpvForm" class="flex-1 bg-green-800 text-white h-7 rounded-md">Read Data</button>
               <button id="closePortDPV"  class="flex-1 bg-red-600 text-white  rounded-md">Stop Read</button>
            </div>
         </div>
         <div id="SWV" class="tabcontent">
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Maiores odio adipisci provident quia accusantium nulla vero. Quae nobis quis libero quia maxime? Illum, eligendi voluptatem similique sequi inventore deleniti placeat.</p>
         </div>
         <div class="border h-10 flex justify-between items-center p-4">
            <select class="w-44 border rounded-sm" id="portSelector" title="Select Device"></select>
            <button class="" id="connectButton" title="Connect Device">
               <svg class="w-6 h-6 dark:text-white" aria-hidden="true" fill="green" viewBox="0 0 20 20">
                  <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"/>
               </svg>
            </button>
            <button id="listPortsButton" class="w" title="Refresh Ports">
               <svg class="w-6 h-6 text-gray-800 dark:text-dark" aria-hidden="true" fill="none" viewBox="0 0 18 20">
                  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 1v5h-5M2 19v-5h5m10-4a8 8 0 0 1-14.947 3.97M1 10a8 8 0 0 1 14.947-3.97"/>
               </svg>
            </button>
            <button id="closePortButton" class="w" title="Disconnect Device">
               <svg class="w-6 h-6 text-red-600 dark:text-red" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="red" viewBox="0 0 14 14">
                  <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
               </svg>
            </button>
         </div>

         <!-- Notification Connecterd Device -->
         <div class="flex justify-center">
            <div id="connectedDevice" class="mt-5 w-64 bg-green-300 text-black p-2 shadow-md border rounded hidden">
               <button class="float-right" data-alert-dimissible="true" data-notification-id="connectedDevice" onclick="handleClickCloseButton(this)">&times;</button>
               <h2 class="text-base font-semibold">‚úÖ Device Connected</h2>
               <p class="text-sm">Your device is now connected and ready to use.</p>
            </div>
         </div>
         <!-- Notification Connecterd Device -->

         <!-- Notification Disconnecte Device -->
         <div class="flex justify-center">
            <div id="disconnectedDevice" class="mt-5 w-64 bg-red-300 text-black p-2 shadow-md border rounded hidden">
                <button class="float-right" data-alert-dimissible="true" data-notification-id="disconnectedDevice" onclick="handleClickCloseButton(this)">&times;</button>
                <h2 class="text-base font-semibold">‚ùå Device Disconnected</h2>
                <p class="text-sm">Your device has been disconnected.</p>
            </div>
        </div>
         <!-- Notification Disconnecte Device -->

         <!-- Notification Device Malfunction -->
         <div class="flex justify-center">
            <div id="deviceMalfunction" class="mt-5 w-64 bg-red-300 text-black p-2 shadow-md border rounded hidden">
               <button class="float-right" role="button" data-alert-dimissible="true" data-notification-id="deviceMalfunction" onclick="handleClickCloseButton(this)">&times;</button>
               <h2 class="text-base font-semibold">üö´ Device Malfunction</h2>
               <p class="text-sm">The device is not functioning properly. Please check the device status.</p>
            </div>
         </div>
         <!-- Notification Device Malfunction -->

         <!-- Notification Data Out of Rang -->
         <div class="flex justify-center">
            <div id="dataOutRange" class="mt-5 w-64 bg-yellow-300 text-black p-2 shadow-md border rounded hidden">
               <button class="float-right" role="button" data-alert-dimissible="true" data-notification-id="dataOutRange" onclick="handleClickCloseButton(this)">&times;</button>
               <h2 class="text-base font-semibold">‚ö†Ô∏è Data Out of Range</h2>
               <p class="text-sm">The received data is out of the acceptable range. Please review the data.</p>
            </div>
         </div>
         <!-- Notification Data Out of Rang -->

      </div>
      <div class="flex-1 border z-10">
         <div class="h-full flex flex-col">
            <div id="mychart" class="w-full h-full"></div>
            <div class="w-full bg-gray-200 h-2.5 dark:bg-gray-300">
               <div id="myProgressBar" class="bg-green-600 h-2.5 rounded-full" style="width: 0"></div>
            </div>

            <!-- Nofication Data Received-->
            <div class="absolute bottom-1/2 left-1/2">
               <div id="dataReceived" class="w-64 bg-green-300 text-black p-2 shadow-md border rounded hidden">
                  <button class="float-right" role="button" data-alert-dimissible="true" data-notification-id="dataReceived" onclick="handleClickCloseButton(this)">&times;</button>
                  <h2 class="text-base font-semibold">‚úÖ Data Received</h2>
                  <p class="text-sm">Your data has been received successfully.</p>
               </div>
            </div>
            <!-- Nofication Data Received-->

            <!-- Nofication Data Loss-->
            <div class="absolute bottom-1/2 left-1/2">
               <div id="dataLoss" class="w-64 bg-yellow-300 text-black p-2 shadow-md border rounded hidden">
                  <button class="float-right" role="button" data-alert-dimissible="true" data-notification-id="dataLoss" onclick="handleClickCloseButton(this)">&times;</button>
                  <h2 class="text-base font-semibold">‚ö†Ô∏è Data Loss</h2>
                  <p class="text-sm">There was a loss of received data.</p>
               </div>
            </div>
            <!-- Nofication Data Loss-->
         </div>
      </div>

      <!-- Nofication Data Loss-->
      <div class="absolute bottom-1/2 left-1/2 z-40">
         <div id="contactSupport" class="w-64 bg-yellow-300 text-black p-2 shadow-md border rounded hidden">
            <button class="float-right" role="button" data-alert-dimissible="true" data-notification-id="contactSupport" onclick="handleClickCloseButton(this)">&times;</button>
            <h2 class="text-base font-semibold">‚ùå Contact Support</h2>
            <p class="text-sm">An error occurred. Please contact support for assistance <a class="text-sm text-decoration: underline" href="https://api.whatsapp.com/send?phone=5547996040396" target="_blank">ModHub Technology</a>. </p>
            
         </div>
      </div>
      <!-- Nofication Data Loss-->
      
      <script src="../scr/js/tabs.js"></script>
      <script src="../scr/arduino/serial.js"></script>
      <script src="../scr/arduino/writer.js"></script>
      <script src="../scr/arduino/reader.js"></script>
      <script src="../scr/command/cv.js"></script>
      <script src="../scr/command/dpv.js"></script>
      <script src="../scr/js/checksum.js"></script>
      <script src="../scr/js/notification.js"></script>
      <script src="../node_modules/plotly.js-dist-min/plotly.min.js"></script>
      <script src="../scr/chart/chart.js"></script>
   </body>
</html>